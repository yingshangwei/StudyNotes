### Linux内存管理之伙伴算法

------

伙伴算法管理的是物理内存的分配。

伙伴算法的本质管理模式其实与*线段树*有一些相像，感觉可以从线段树这颗树的结构展开去回忆伙伴算法的模式。



##### 那就从动态开点线段树的角度讲讲这个伙伴系统是如何操作的：

首先思考一下可以如何用基本的动态开点线段树实现对[0,2^k-1]个连续物理页的内存管理。

显然线段树管理得区间是[0,2^k - 1]，那么在初始得时候，只有最上层会有一个节点（当然对于伙伴系统来说一开始最上层会有多个节点）。

当有需求内存的请求来的时候，若需求内存页数>2^k，那么



